function N(s){if(typeof s!="string")throw TypeError("Source must be a string");let f=0,p=1,n,c=!1;e();let y=a();if(l(),!c)throw new SyntaxError(o());return m(y),y;function e(){f<s.length?(n=s[f],f++):(n="",c=!0),n==="\n"&&p++}function a(){var r,i,t,u,h,S,$;return l(),($=(S=(h=(u=(t=(i=(r=g())!=null?r:x())!=null?i:I())!=null?t:J())!=null?u:T())!=null?h:b("true",!0))!=null?S:b("false",!1))!=null?$:b("null",null)}function g(){if(n!=='"')return;let r="",i=!1;for(;;)if(e(),i){if(n==="u"){if(e(),n!=="{")throw new SyntaxError(o(d.u+" "+JSON.stringify(n)+' (expected "{")'));let t="";for(;e(),n!=="}";){if(!R(n))throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));if(t+=n,t.length>6)throw new SyntaxError(o(d.u+" (too many hex digits)"))}if(t.length===0)throw new SyntaxError(o(d.u));let u=parseInt(t,16);if(u>1114111)throw new SyntaxError(o(d.u+" (out of range)"));r+=String.fromCodePoint(u)}else{let t=K[n];if(!t)throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));r+=t}i=!1}else if(n==="\\")i=!0;else{if(n==='"')break;if(n<"")throw new SyntaxError(o());r+=n}return e(),r}function x(){if(n!=="`")return;let r="",i=!1;do{let t="\n";for(;;){if(e(),n==="\r")if(e(),n==="\n"){t="\r\n";break}else r+="\r";else if(n==="\n"||c)break;r+=n}for(e();F(n);)e();i=n==="`",i&&(r+=t)}while(i);return r}function I(){if(!w(n)&&n!=="-")return;let r="",i=!1;if(n==="-"&&(r+=n,e(),!w(n)))throw new SyntaxError(o());if(n==="0")r+=n,e();else for(;w(n);)r+=n,e();if(n==="."){if(i=!0,r+=n,e(),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,e()}if(n==="e"||n==="E"){if(i=!0,r+=n,e(),(n==="+"||n==="-")&&(r+=n,e()),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,e()}return i?parseFloat(r):C(r)}function J(){if(n!=="{")return;e(),l();let r={};if(n==="}")return e(),r;for(;;){let i=f,t;if(n==='"'?t=g():t=M(),Object.prototype.hasOwnProperty.call(r,t))throw f=i,new SyntaxError(o("Duplicate key ".concat(JSON.stringify(t))));if(l(),n!==":")throw new SyntaxError(o());e();let u=a();m(u),r[t]=u;let h=l();if(n==="}")return e(),r;if(n===","){if(e(),l(),n==="}")return e(),r}else{if(h)continue;throw new SyntaxError(o("Expected comma or newline between key-value pairs"))}}}function M(){let r="";for(;j(n);)r+=n,e();if(r==="")throw new SyntaxError(o());return r}function T(){if(n!=="[")return;e(),l();let r=[];if(n==="]")return e(),r;for(;;){let i=a();m(i),r.push(i);let t=l();if(n==="]")return e(),r;if(n===","){if(e(),l(),n==="]")return e(),r}else{if(t)continue;throw new SyntaxError(o("Expected comma or newline between values"))}}}function b(r,i){if(n===r[0]){for(let t=1;t<r.length;t++)if(e(),n!==r[t])throw new SyntaxError(o());if(e(),O(n)||n===","||n==="}"||n==="]"||n===void 0)return i;throw new SyntaxError(o())}}function l(){let r=!1;for(;O(n);)r||(r=n==="\n"),e();let i=_();return r||i}function _(){if(n==="#"){for(;!c&&n!=="\n";)e();return l()}return!1}function F(r){return r===" "||r==="	"}function O(r){return r===" "||r==="	"||r==="\n"||r==="\r"}function R(r){return r>="0"&&r<="9"||r>="A"&&r<="F"}function w(r){return r>="0"&&r<="9"}function j(r){return r>="A"&&r<="Z"||r>="a"&&r<="z"||r>="0"&&r<="9"||r==="_"||r==="-"}function C(r){if(r=="-0")return-0;let i=Number(r);return i>=Number.MIN_SAFE_INTEGER&&i<=Number.MAX_SAFE_INTEGER?i:BigInt(r)}function m(r){if(r===void 0)throw new SyntaxError(o())}function o(r="Unexpected character ".concat(JSON.stringify(n))){n||(r="Unexpected end of input");let i=s.substring(f-40,f).split("\n"),t=i.at(-1)||"",u=s.substring(f,f+40).split("\n",1).at(0)||"";t===""&&(t=i.at(-2)||"",t+=" ",p--,u="");let h="    ".concat(t).concat(u,"\n"),S="    ".concat(".".repeat(Math.max(0,t.length-1)),"^\n");return"".concat(r," on line ").concat(p,".\n\n").concat(h).concat(S)}}var K={'"':'"',"\\":"\\",n:"\n",r:"\r",t:"	"},d={u:"Invalid escape sequence"};function A(s){return k(s,0)}function k(s,f){let p=s===null?"null":Array.isArray(s)?"array":typeof s;switch(p){case"string":return JSON.stringify(s);case"boolean":case"bigint":case"number":return"".concat(s);case"null":case"undefined":return"null";case"array":{let n=s.length;if(n===0)return"[]";let c=E(f+1),y=E(f),e="[\n";for(let a=0;a<n;a++)a>0&&(e+="\n"),e+=c+k(s[a],f+1);return e+"\n"+y+"]"}case"object":{let n=Object.keys(s),c=n.length;if(c===0)return"{}";let y=E(f+1),e=E(f),a="{\n";for(let g=0;g<c;g++){g>0&&(a+="\n");let x=n[g];a+=y+V(x)+": "+k(s[x],f+1)}return a+"\n"+e+"}"}default:throw new Error("Unsupported value type: ".concat(p))}}var P=/^[A-Za-z0-9_-]+$/;function V(s){return P.test(s)?s:JSON.stringify(s)}function E(s){return" ".repeat(2*s)}(function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:Function("return this")()})().MAML={parse:N,stringify:A};
