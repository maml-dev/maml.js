function N(s){if(typeof s!="string")throw TypeError("Source must be a string");let a=0,y=1,n,c=!1;t();let p=g();if(l(),!c)throw new SyntaxError(o());return m(p),p;function t(){a<s.length?(n=s[a],a++):(n="",c=!0),n==="\n"&&y++}function f(){return s.substring(a,a+2)}function g(){var r,e,i,u,h,x,O;return l(),(O=(x=(h=(u=(i=(e=(r=I())!=null?r:S())!=null?e:M())!=null?i:J())!=null?u:_())!=null?h:b("true",!0))!=null?x:b("false",!1))!=null?O:b("null",null)}function S(){if(n!=='"')return;let r="",e=!1;for(;;)if(t(),e){if(n==="u"){if(t(),n!=="{")throw new SyntaxError(o(d.u+" "+JSON.stringify(n)+' (expected "{")'));let i="";for(;t(),n!=="}";){if(!j(n))throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));if(i+=n,i.length>6)throw new SyntaxError(o(d.u+" (too many hex digits)"))}if(i.length===0)throw new SyntaxError(o(d.u));let u=parseInt(i,16);if(u>1114111)throw new SyntaxError(o(d.u+" (out of range)"));r+=String.fromCodePoint(u)}else{let i=R[n];if(!i)throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));r+=i}e=!1}else if(n==="\\")e=!0;else{if(n==='"')break;if(n==="\n")throw new SyntaxError(o('Use """ for multiline strings or escape newlines with "\\n"'));if(n<"")throw new SyntaxError(o("Unescaped control character ".concat(JSON.stringify(n))));r+=n}return t(),r}function I(){if(n!=='"'||f()!=='""')return;t(),t(),t();let r=!1;n==="\n"&&(r=!0,t());let e="";for(;!c;){if(n==='"'&&f()==='""'){if(t(),t(),t(),e===""&&!r)throw new SyntaxError(o("Multiline strings cannot be empty"));return e}e+=n,t()}throw new SyntaxError(o())}function M(){if(!w(n)&&n!=="-")return;let r="",e=!1;if(n==="-"&&(r+=n,t(),!w(n)))throw new SyntaxError(o());if(n==="0")r+=n,t();else for(;w(n);)r+=n,t();if(n==="."){if(e=!0,r+=n,t(),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,t()}if(n==="e"||n==="E"){if(e=!0,r+=n,t(),(n==="+"||n==="-")&&(r+=n,t()),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,t()}return e?parseFloat(r):K(r)}function J(){if(n!=="{")return;t(),l();let r={};if(n==="}")return t(),r;for(;;){let e=a,i;if(n==='"'?i=S():i=T(),Object.prototype.hasOwnProperty.call(r,i))throw a=e,new SyntaxError(o("Duplicate key ".concat(JSON.stringify(i))));if(l(),n!==":")throw new SyntaxError(o());t();let u=g();m(u),r[i]=u;let h=l();if(n==="}")return t(),r;if(n===","){if(t(),l(),n==="}")return t(),r}else{if(h)continue;throw new SyntaxError(o("Expected comma or newline between key-value pairs"))}}}function T(){let r="";for(;C(n);)r+=n,t();if(r==="")throw new SyntaxError(o());return r}function _(){if(n!=="[")return;t(),l();let r=[];if(n==="]")return t(),r;for(;;){let e=g();m(e),r.push(e);let i=l();if(n==="]")return t(),r;if(n===","){if(t(),l(),n==="]")return t(),r}else{if(i)continue;throw new SyntaxError(o("Expected comma or newline between values"))}}}function b(r,e){if(n===r[0]){for(let i=1;i<r.length;i++)if(t(),n!==r[i])throw new SyntaxError(o());if(t(),k(n)||n===","||n==="}"||n==="]"||n===void 0)return e;throw new SyntaxError(o())}}function l(){let r=!1;for(;k(n);)r||(r=n==="\n"),t();let e=F();return r||e}function F(){if(n==="#"){for(;!c&&n!=="\n";)t();return l()}return!1}function k(r){return r===" "||r==="\n"||r==="	"||r==="\r"}function j(r){return r>="0"&&r<="9"||r>="A"&&r<="F"}function w(r){return r>="0"&&r<="9"}function C(r){return r>="A"&&r<="Z"||r>="a"&&r<="z"||r>="0"&&r<="9"||r==="_"||r==="-"}function K(r){if(r=="-0")return-0;let e=Number(r);return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?e:BigInt(r)}function m(r){if(r===void 0)throw new SyntaxError(o())}function o(r="Unexpected character ".concat(JSON.stringify(n))){n||(r="Unexpected end of input");let e=s.substring(a-40,a).split("\n"),i=e.at(-1)||"",u=s.substring(a,a+40).split("\n",1).at(0)||"";i===""&&(i=e.at(-2)||"",i+=" ",y--,u="");let h="    ".concat(i).concat(u,"\n"),x="    ".concat(".".repeat(Math.max(0,i.length-1)),"^\n");return"".concat(r," on line ").concat(y,".\n\n").concat(h).concat(x)}}var R={'"':'"',"\\":"\\",n:"\n",r:"\r",t:"	"},d={u:"Invalid escape sequence"};function $(s){return A(s,0)}function A(s,a){let y=s===null?"null":Array.isArray(s)?"array":typeof s;switch(y){case"string":return JSON.stringify(s);case"boolean":case"bigint":case"number":return"".concat(s);case"null":case"undefined":return"null";case"array":{let n=s.length;if(n===0)return"[]";let c=E(a+1),p=E(a),t="[\n";for(let f=0;f<n;f++)f>0&&(t+="\n"),t+=c+A(s[f],a+1);return t+"\n"+p+"]"}case"object":{let n=Object.keys(s),c=n.length;if(c===0)return"{}";let p=E(a+1),t=E(a),f="{\n";for(let g=0;g<c;g++){g>0&&(f+="\n");let S=n[g];f+=p+L(S)+": "+A(s[S],a+1)}return f+"\n"+t+"}"}default:throw new Error("Unsupported value type: ".concat(y))}}var U=/^[A-Za-z0-9_-]+$/;function L(s){return U.test(s)?s:JSON.stringify(s)}function E(s){return" ".repeat(2*s)}var P=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:Function("return this")()};P().MAML={parse:N,stringify:$};
//# sourceMappingURL=maml.min.js.map
