var K={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function m(i){if(typeof i!="string")throw TypeError("Source must be a string");let a=0,p=1,n,c=!1;r();let y=g();if(u(),!c)throw new SyntaxError(o());return x(y),y;function r(){a<i.length?(n=i[a],a++):(n="",c=!0),n==="\n"&&p++}function f(){return i.substring(a,a+2)}function g(){var e,t,s,l,h,S,I;return u(),(I=(S=(h=(l=(s=(t=(e=k())!=null?e:d())!=null?t:M())!=null?s:_())!=null?l:O())!=null?h:E("true",!0))!=null?S:E("false",!1))!=null?I:E("null",null)}function d(){if(n!=='"')return;let e="",t=!1;for(;;)if(r(),t){if(n==="u"){let s="";for(let l=0;l<4;l++){if(r(),!F(n))throw new SyntaxError(o("Invalid Unicode escape sequence"));s+=n}e+=String.fromCharCode(parseInt(s,16))}else{let s=K[n];if(!s)throw new SyntaxError(o("Invalid escape sequence ".concat(JSON.stringify(n))));e+=s}t=!1}else if(n==="\\")t=!0;else{if(n==='"')break;if(n==="\n")throw new SyntaxError(o('Use """ for multiline strings or escape newlines with "\\n"'));if(n<"")throw new SyntaxError(o("Unescaped control character ".concat(JSON.stringify(n))));e+=n}return r(),e}function k(){if(n!=='"'||f()!=='""')return;r(),r(),r();let e=!1;n==="\n"&&(e=!0,r());let t="";for(;!c;){if(n==='"'&&f()==='""'){if(r(),r(),r(),t===""&&!e)throw new SyntaxError(o("Multiline strings cannot be empty"));return t}t+=n,r()}throw new SyntaxError(o())}function M(){if(!w(n)&&n!=="-")return;let e="",t=!1;if(n==="-"&&(e+=n,r(),!w(n)))throw new SyntaxError(o());if(n==="0")e+=n,r();else for(;w(n);)e+=n,r();if(n==="."){if(t=!0,e+=n,r(),!w(n))throw new SyntaxError(o());for(;w(n);)e+=n,r()}if(n==="e"||n==="E"){if(t=!0,e+=n,r(),(n==="+"||n==="-")&&(e+=n,r()),!w(n))throw new SyntaxError(o());for(;w(n);)e+=n,r()}return t?parseFloat(e):J(e)}function _(){if(n!=="{")return;r(),u();let e={};if(n==="}")return r(),e;for(;;){let t;if(n==='"'?t=d():t=C(),u(),n!==":")throw new SyntaxError(o());r();let s=g();x(s),e[t]=s;let l=u();if(n==="}")return r(),e;if(n===","){if(r(),u(),n==="}")return r(),e}else{if(l)continue;throw new SyntaxError(o("Expected comma or newline between key-value pairs"))}}}function C(){let e="";for(;U(n);)e+=n,r();if(e==="")throw new SyntaxError(o());return e}function O(){if(n!=="[")return;r(),u();let e=[];if(n==="]")return r(),e;for(;;){let t=g();x(t),e.push(t);let s=u();if(n==="]")return r(),e;if(n===","){if(r(),u(),n==="]")return r(),e}else{if(s)continue;throw new SyntaxError(o("Expected comma or newline between values"))}}}function E(e,t){if(n===e[0]){for(let s=1;s<e.length;s++)if(r(),n!==e[s])throw new SyntaxError(o());if(r(),$(n)||n===","||n==="}"||n==="]"||n===void 0)return t;throw new SyntaxError(o())}}function u(){let e=!1;for(;$(n);)e||(e=n==="\n"),r();let t=T();return e||t}function T(){if(n==="#"){for(;!c&&n!=="\n";)r();return u()}return!1}function $(e){return e===" "||e==="\n"||e==="	"||e==="\r"}function F(e){return e>="0"&&e<="9"||e>="A"&&e<="F"}function w(e){return e>="0"&&e<="9"}function U(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||e==="_"||e==="-"}function J(e){if(e=="-0")return-0;let t=Number(e);return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?t:BigInt(e)}function x(e){if(e===void 0)throw new SyntaxError(o())}function o(e="Unexpected character ".concat(JSON.stringify(n))){n||(e="Unexpected end of input");let t=i.substring(a-40,a).split("\n"),s=t.at(-1)||"",l=i.substring(a,a+40).split("\n",1).at(0)||"";s===""&&(s=t.at(-2)||"",s+=" ",p--,l="");let h="    ".concat(s).concat(l,"\n"),S="    ".concat(".".repeat(Math.max(0,s.length-1)),"^\n");return"".concat(e," on line ").concat(p,".\n\n").concat(h).concat(S)}}function A(i){return N(i,0)}function N(i,a){let p=i===null?"null":Array.isArray(i)?"array":typeof i;switch(p){case"string":return JSON.stringify(i);case"boolean":case"bigint":case"number":return"".concat(i);case"null":case"undefined":return"null";case"array":{let n=i.length;if(n===0)return"[]";let c=b(a+1),y=b(a),r="[\n";for(let f=0;f<n;f++)f>0&&(r+="\n"),r+=c+N(i[f],a+1);return r+"\n"+y+"]"}case"object":{let n=Object.keys(i),c=n.length;if(c===0)return"{}";let y=b(a+1),r=b(a),f="{\n";for(let g=0;g<c;g++){g>0&&(f+="\n");let d=n[g];f+=y+j(d)+": "+N(i[d],a+1)}return f+"\n"+r+"}"}default:throw new Error("Unsupported value type: ".concat(p))}}var R=/^[A-Za-z0-9_-]+$/;function j(i){return R.test(i)?i:JSON.stringify(i)}function b(i){return" ".repeat(2*i)}var L=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:Function("return this")()};L().MAML={parse:m,stringify:A};
//# sourceMappingURL=maml.min.js.map
