function N(s){if(typeof s!="string")throw TypeError("Source must be a string");let a=0,p=1,n,c=!1;t();let y=f();if(l(),!c)throw new SyntaxError(o());return m(y),y;function t(){a<s.length?(n=s[a],a++):(n="",c=!0),n==="\n"&&p++}function f(){var r,e,i,u,h,x,k;return l(),(k=(x=(h=(u=(i=(e=(r=g())!=null?r:S())!=null?e:I())!=null?i:J())!=null?u:T())!=null?h:b("true",!0))!=null?x:b("false",!1))!=null?k:b("null",null)}function g(){if(n!=='"')return;let r="",e=!1;for(;;)if(t(),e){if(n==="u"){if(t(),n!=="{")throw new SyntaxError(o(d.u+" "+JSON.stringify(n)+' (expected "{")'));let i="";for(;t(),n!=="}";){if(!R(n))throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));if(i+=n,i.length>6)throw new SyntaxError(o(d.u+" (too many hex digits)"))}if(i.length===0)throw new SyntaxError(o(d.u));let u=parseInt(i,16);if(u>1114111)throw new SyntaxError(o(d.u+" (out of range)"));r+=String.fromCodePoint(u)}else{let i=K[n];if(!i)throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));r+=i}e=!1}else if(n==="\\")e=!0;else{if(n==='"')break;if(n==="\n")throw new SyntaxError(o('Use """ for multiline strings or escape newlines with "\\n"'));if(n<"")throw new SyntaxError(o("Unescaped control character ".concat(JSON.stringify(n))));r+=n}return t(),r}function S(){if(n!=="`")return;let r="",e=!1;do{for(;t(),!(n==="\n"||c);)r+=n;for(t();F(n);)t();e=n==="`",e&&(r+="\n")}while(e);return r}function I(){if(!w(n)&&n!=="-")return;let r="",e=!1;if(n==="-"&&(r+=n,t(),!w(n)))throw new SyntaxError(o());if(n==="0")r+=n,t();else for(;w(n);)r+=n,t();if(n==="."){if(e=!0,r+=n,t(),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,t()}if(n==="e"||n==="E"){if(e=!0,r+=n,t(),(n==="+"||n==="-")&&(r+=n,t()),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,t()}return e?parseFloat(r):C(r)}function J(){if(n!=="{")return;t(),l();let r={};if(n==="}")return t(),r;for(;;){let e=a,i;if(n==='"'?i=g():i=M(),Object.prototype.hasOwnProperty.call(r,i))throw a=e,new SyntaxError(o("Duplicate key ".concat(JSON.stringify(i))));if(l(),n!==":")throw new SyntaxError(o());t();let u=f();m(u),r[i]=u;let h=l();if(n==="}")return t(),r;if(n===","){if(t(),l(),n==="}")return t(),r}else{if(h)continue;throw new SyntaxError(o("Expected comma or newline between key-value pairs"))}}}function M(){let r="";for(;j(n);)r+=n,t();if(r==="")throw new SyntaxError(o());return r}function T(){if(n!=="[")return;t(),l();let r=[];if(n==="]")return t(),r;for(;;){let e=f();m(e),r.push(e);let i=l();if(n==="]")return t(),r;if(n===","){if(t(),l(),n==="]")return t(),r}else{if(i)continue;throw new SyntaxError(o("Expected comma or newline between values"))}}}function b(r,e){if(n===r[0]){for(let i=1;i<r.length;i++)if(t(),n!==r[i])throw new SyntaxError(o());if(t(),$(n)||n===","||n==="}"||n==="]"||n===void 0)return e;throw new SyntaxError(o())}}function l(){let r=!1;for(;$(n);)r||(r=n==="\n"),t();let e=_();return r||e}function _(){if(n==="#"){for(;!c&&n!=="\n";)t();return l()}return!1}function F(r){return r===" "||r==="	"}function $(r){return r===" "||r==="	"||r==="\n"||r==="\r"}function R(r){return r>="0"&&r<="9"||r>="A"&&r<="F"}function w(r){return r>="0"&&r<="9"}function j(r){return r>="A"&&r<="Z"||r>="a"&&r<="z"||r>="0"&&r<="9"||r==="_"||r==="-"}function C(r){if(r=="-0")return-0;let e=Number(r);return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?e:BigInt(r)}function m(r){if(r===void 0)throw new SyntaxError(o())}function o(r="Unexpected character ".concat(JSON.stringify(n))){n||(r="Unexpected end of input");let e=s.substring(a-40,a).split("\n"),i=e.at(-1)||"",u=s.substring(a,a+40).split("\n",1).at(0)||"";i===""&&(i=e.at(-2)||"",i+=" ",p--,u="");let h="    ".concat(i).concat(u,"\n"),x="    ".concat(".".repeat(Math.max(0,i.length-1)),"^\n");return"".concat(r," on line ").concat(p,".\n\n").concat(h).concat(x)}}var K={'"':'"',"\\":"\\",n:"\n",r:"\r",t:"	"},d={u:"Invalid escape sequence"};function O(s){return A(s,0)}function A(s,a){let p=s===null?"null":Array.isArray(s)?"array":typeof s;switch(p){case"string":return JSON.stringify(s);case"boolean":case"bigint":case"number":return"".concat(s);case"null":case"undefined":return"null";case"array":{let n=s.length;if(n===0)return"[]";let c=E(a+1),y=E(a),t="[\n";for(let f=0;f<n;f++)f>0&&(t+="\n"),t+=c+A(s[f],a+1);return t+"\n"+y+"]"}case"object":{let n=Object.keys(s),c=n.length;if(c===0)return"{}";let y=E(a+1),t=E(a),f="{\n";for(let g=0;g<c;g++){g>0&&(f+="\n");let S=n[g];f+=y+P(S)+": "+A(s[S],a+1)}return f+"\n"+t+"}"}default:throw new Error("Unsupported value type: ".concat(p))}}var U=/^[A-Za-z0-9_-]+$/;function P(s){return U.test(s)?s:JSON.stringify(s)}function E(s){return" ".repeat(2*s)}(function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:Function("return this")()})().MAML={parse:N,stringify:O};
