function N(s){if(typeof s!="string")throw TypeError("Source must be a string");let f=0,p=1,n,c=!1;t();let y=a();if(l(),!c)throw new SyntaxError(o());return m(y),y;function t(){f<s.length?(n=s[f],f++):(n="",c=!0),n==="\n"&&p++}function a(){var r,i,e,u,h,S;return l(),(S=(h=(u=(e=(i=(r=g())!=null?r:x())!=null?i:k())!=null?e:J())!=null?u:b("true",!0))!=null?h:b("false",!1))!=null?S:b("null",null)}function g(){if(n!=='"')return;let r="",i=!1;for(;;)if(t(),i){if(n==="u"){if(t(),n!=="{")throw new SyntaxError(o(d.u+" "+JSON.stringify(n)+' (expected "{")'));let e="";for(;t(),n!=="}";){if(!T(n))throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));if(e+=n,e.length>6)throw new SyntaxError(o(d.u+" (too many hex digits)"))}if(e.length===0)throw new SyntaxError(o(d.u));let u=parseInt(e,16);if(u>1114111)throw new SyntaxError(o(d.u+" (out of range)"));r+=String.fromCodePoint(u)}else{let e=j[n];if(!e)throw new SyntaxError(o(d.u+" "+JSON.stringify(n)));r+=e}i=!1}else if(n==="\\")i=!0;else{if(n==='"')break;if(n==="\n")throw new SyntaxError(o('Use """ for multiline strings or escape newlines with "\\n"'));if(n<"")throw new SyntaxError(o("Unescaped control character ".concat(JSON.stringify(n))));r+=n}return t(),r}function x(){if(!w(n)&&n!=="-")return;let r="",i=!1;if(n==="-"&&(r+=n,t(),!w(n)))throw new SyntaxError(o());if(n==="0")r+=n,t();else for(;w(n);)r+=n,t();if(n==="."){if(i=!0,r+=n,t(),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,t()}if(n==="e"||n==="E"){if(i=!0,r+=n,t(),(n==="+"||n==="-")&&(r+=n,t()),!w(n))throw new SyntaxError(o());for(;w(n);)r+=n,t()}return i?parseFloat(r):F(r)}function k(){if(n!=="{")return;t(),l();let r={};if(n==="}")return t(),r;for(;;){let i=f,e;if(n==='"'?e=g():e=I(),Object.prototype.hasOwnProperty.call(r,e))throw f=i,new SyntaxError(o("Duplicate key ".concat(JSON.stringify(e))));if(l(),n!==":")throw new SyntaxError(o());t();let u=a();m(u),r[e]=u;let h=l();if(n==="}")return t(),r;if(n===","){if(t(),l(),n==="}")return t(),r}else{if(h)continue;throw new SyntaxError(o("Expected comma or newline between key-value pairs"))}}}function I(){let r="";for(;_(n);)r+=n,t();if(r==="")throw new SyntaxError(o());return r}function J(){if(n!=="[")return;t(),l();let r=[];if(n==="]")return t(),r;for(;;){let i=a();m(i),r.push(i);let e=l();if(n==="]")return t(),r;if(n===","){if(t(),l(),n==="]")return t(),r}else{if(e)continue;throw new SyntaxError(o("Expected comma or newline between values"))}}}function b(r,i){if(n===r[0]){for(let e=1;e<r.length;e++)if(t(),n!==r[e])throw new SyntaxError(o());if(t(),O(n)||n===","||n==="}"||n==="]"||n===void 0)return i;throw new SyntaxError(o())}}function l(){let r=!1;for(;O(n);)r||(r=n==="\n"),t();let i=M();return r||i}function M(){if(n==="#"){for(;!c&&n!=="\n";)t();return l()}return!1}function O(r){return r===" "||r==="\n"||r==="	"||r==="\r"}function T(r){return r>="0"&&r<="9"||r>="A"&&r<="F"}function w(r){return r>="0"&&r<="9"}function _(r){return r>="A"&&r<="Z"||r>="a"&&r<="z"||r>="0"&&r<="9"||r==="_"||r==="-"}function F(r){if(r=="-0")return-0;let i=Number(r);return i>=Number.MIN_SAFE_INTEGER&&i<=Number.MAX_SAFE_INTEGER?i:BigInt(r)}function m(r){if(r===void 0)throw new SyntaxError(o())}function o(r="Unexpected character ".concat(JSON.stringify(n))){n||(r="Unexpected end of input");let i=s.substring(f-40,f).split("\n"),e=i.at(-1)||"",u=s.substring(f,f+40).split("\n",1).at(0)||"";e===""&&(e=i.at(-2)||"",e+=" ",p--,u="");let h="    ".concat(e).concat(u,"\n"),S="    ".concat(".".repeat(Math.max(0,e.length-1)),"^\n");return"".concat(r," on line ").concat(p,".\n\n").concat(h).concat(S)}}var j={'"':'"',"\\":"\\",n:"\n",r:"\r",t:"	"},d={u:"Invalid escape sequence"};function $(s){return A(s,0)}function A(s,f){let p=s===null?"null":Array.isArray(s)?"array":typeof s;switch(p){case"string":return JSON.stringify(s);case"boolean":case"bigint":case"number":return"".concat(s);case"null":case"undefined":return"null";case"array":{let n=s.length;if(n===0)return"[]";let c=E(f+1),y=E(f),t="[\n";for(let a=0;a<n;a++)a>0&&(t+="\n"),t+=c+A(s[a],f+1);return t+"\n"+y+"]"}case"object":{let n=Object.keys(s),c=n.length;if(c===0)return"{}";let y=E(f+1),t=E(f),a="{\n";for(let g=0;g<c;g++){g>0&&(a+="\n");let x=n[g];a+=y+K(x)+": "+A(s[x],f+1)}return a+"\n"+t+"}"}default:throw new Error("Unsupported value type: ".concat(p))}}var C=/^[A-Za-z0-9_-]+$/;function K(s){return C.test(s)?s:JSON.stringify(s)}function E(s){return" ".repeat(2*s)}(function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:Function("return this")()})().MAML={parse:N,stringify:$};
